# 图编辑距离评估算法

这是一个用于评估预测图与ground truth图之间相似度的Python工具。算法能够忽略节点名称的差异，专注于图的结构和边标签的匹配。

## 功能特点

- ✅ 支持忽略节点名称差异（只关注图结构）
- ✅ 基于图编辑距离的评估方法
- ✅ 详细的日志输出，便于监控算法运行
- ✅ 支持有向多重图（带标签的边）
- ✅ 自动节点映射算法

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 1. 准备数据文件

创建两个txt格式的文件，每行一个三元组：

**ground_truth.txt** (标准答案):
```
"S1", "operator1", "S2"
"S2", "operator1", "S2"
"S1", "operator1", "S5"
"S5", "operator2", "S2"
"S2", "operator4", "S3"
```

**prediction.txt** (预测结果):
```
"tst", "operator1", "ggg"
"ggg", "operator1", "ggg"
"tst", "operator1", "S5"
"S5", "operator2", "ggg"
"ggg", "operator4", "S3"
```

### 2. 运行评估

```bash
python graph_evaluator.py
```

### 3. 查看结果

- 控制台会输出评估结果摘要
- 详细日志保存在 `graph_evaluation.log` 文件中

## 评估指标

算法会计算以下指标：

- **总编辑距离**: 将预测图转换为ground truth图所需的总成本
- **节点编辑成本**: 添加/删除节点的成本
- **边编辑成本**: 添加/删除边的成本
- **边相似度**: 共同边数 / 总边数的比例（Jaccard相似度）
- **节点映射**: 预测图中的节点到ground truth图中节点的映射关系

## 算法原理

1. **节点映射**: 基于节点的结构特征（入度、出度、边标签分布）找到最佳节点匹配
2. **图标准化**: 将两个图映射到相同的节点空间
3. **编辑距离计算**: 比较标准化后的图，计算需要添加/删除的边和节点

## 示例输出

```
评估结果:
  总编辑距离: 0.0
  节点编辑成本: 0.0
  边编辑成本: 0.0
  需要添加的节点数: 0
  需要删除的节点数: 0
  需要添加的边数: 0
  需要删除的边数: 0
  共同边数: 5
  边相似度: 1.0000
```

## 自定义参数

可以在代码中调整以下参数：

```python
evaluator = GraphEvaluator(
    node_cost=1.0,  # 节点插入/删除的成本
    edge_cost=1.0   # 边插入/删除的成本
)
```

## 注意事项

- 文件编码应为UTF-8
- 三元组格式：`"source", "edge_label", "target"`
- 支持多重边（相同节点对可以有多个不同标签的边）
- 算法会自动处理节点名称的差异

